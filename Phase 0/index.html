<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telecom AI Analytics - Multi-Agent System</title>
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>📊 Telecom KPI Analytics</h1>
            <p class="subtitle">AI-Powered Analysis & Forecasting System</p>
        </header>

        <main class="main-content">
            <!-- FILE UPLOAD SECTION -->
            <section class="upload-section">
                <div class="upload-card">
                    <h2>📁 Upload Data</h2>
                    <div class="upload-area" id="upload-area">
                        <p>Drag & drop file here or click to select</p>
                        <small>Supports: CSV, XLSX (max 1GB)</small>
                    </div>
                    <input type="file" id="file-input" class="file-input" accept=".csv,.xlsx" style="display: none;" />

                    <div id="file-info" class="file-info hidden"></div>
                </div>
            </section>

            <!-- ANALYSIS SELECTION -->
            <section class="analysis-section">
                <h2>🔬 Select Analysis</h2>
                <div class="tabs">
                    <button class="tab-button active" data-tab="correlation-tab">📊 Correlation Analysis</button>
                    <button class="tab-button" data-tab="forecasting-tab">📈 Traffic Forecasting</button>
                    <button class="tab-button" data-tab="anomaly-tab">⚠️ Anomaly Detection</button>
                </div>

                <div class="tab-content">
                    <!-- CORRELATION TAB (EXISTING - UNCHANGED) -->
                    <div id="correlation-tab" class="tab-pane active">
                        <h3>📊 Correlation Analysis</h3>
                        <p>Analyze relationships between KPIs</p>
                        <button class="btn btn-primary" onclick="runCorrelationAnalysis()">
                            Run Correlation Analysis
                        </button>
                        <div id="correlation-results"></div>
                    </div>

                    <!-- FORECASTING TAB (PHASE 2 - NEW) -->
                    <div id="forecasting-tab" class="tab-pane">
                        <h3>📈 Traffic Forecasting</h3>
                        <p>Forecast future traffic patterns using ML models</p>
                        
                        <!-- FORECASTING FORM FIELDS (NEW) -->
                        <div class="form-group">
                            <label for="forecast-model">Select Model:</label>
                            <select id="forecast-model" class="form-control">
                                <option value="auto">Auto (Best Model)</option>
                                <option value="arima">ARIMA</option>
                                <option value="lstm">LSTM</option>
                                <option value="exponential_smoothing">Exponential Smoothing</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="forecast-periods">Forecast Periods:</label>
                            <select id="forecast-periods" class="form-control">
                                <option value="7">7 days</option>
                                <option value="14">14 days</option>
                                <option value="30">30 days</option>
                            </select>
                        </div>
                        <!-- NEW: KPI SELECTION DROPDOWN (Phase 2.5) -->
                        <div class="form-group">
                            <label for="kpi-select">Select KPI:</label>
                            <select id="kpi-select" class="form-control">
                                <option value="">-- Auto-select first KPI --</option>
                            </select>
                        </div>

                        <button class="btn btn-primary" onclick="runForecasting()">
                            Run Forecast
                        </button>
                        
                        <!-- RESULTS DISPLAY AREA (NEW) -->
                        <div id="forecast-results" class="results-container"></div>
                    </div>

                    <!-- ANOMALY DETECTION TAB (PLACEHOLDER) -->
                    <div id="anomaly-tab" class="tab-pane">
                        <h3>⚠️ Anomaly Detection</h3>
                        <p>Detect anomalies in network KPIs (Coming Soon)</p>
                        <button class="btn btn-disabled" disabled>
                            Feature Coming in Phase 3
                        </button>
                    </div>
                </div>
            </section>

            <!-- TASK STATUS SECTION -->
            <section class="status-section">
                <h2>⏳ Task Status</h2>
                <div class="status-card">
                    <div class="status-group">
                        <label>Task ID:</label>
                        <span id="task-id">-</span>
                    </div>
                    <div class="status-group">
                        <label>Status:</label>
                        <span id="status-badge" class="badge badge-pending">Pending</span>
                    </div>
                    <button class="btn btn-secondary" onclick="checkStatus()">Check Status</button>
                </div>
            </section>

            <!-- RESULTS DISPLAY -->
            <section class="results-section">
                <h2>✅ Results</h2>
                <div id="results-display" class="results-display">
                    <p class="placeholder">Results will appear here after analysis</p>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2025 Telecom AI Analytics System | Phase 0 + Phase 1 + Phase 2 Integration</p>
        </footer>
    </div>

    <script src="/assets/js/app.js"></script>
</body>
</html>